function detectDevice(){/Android|webOS|iPhone|iPod|BlackBerry|iPad/i.test(navigator.userAgent)?$("#player").show():$("#host").show()}window.onload=function(){detectDevice()};var App,offset;jQuery(function(a){"use strict";var b={init:function(){b.socket=io.connect(),b.bindEvents()},bindEvents:function(){b.socket.on("connected",b.Connected),b.socket.on("gameCreated",b.gameCreated),b.socket.on("joined",b.joined),b.socket.on("clicked",b.clicked)},Connected:function(){App.socketId=b.socket.io.engine.id},gameCreated:function(a){App.Host.startGame(a)},joined:function(a){App[App.role].changeLayout(a)},clicked:function(a){App.Host.clickAction(a)}};App={activeRoom:0,role:"",socketId:"",init:function(){App.bindEvents(),FastClick.attach(document.body)},endGame:function(b){a("#game").hide(),a("#getCode").hide(),a("#menu").hide(),a("#host").show(),a("#score").show(),a("#newScore").html(b+" Points")},restart:function(){restartGame(),a("#host").hide(),a("#game").show()},controller:function(a,b){App.$doc.on("touchstart",a,function(){App.Player.button(b)}),App.$doc.on("touchend",a,function(){App.Player.button(b)})},bindEvents:function(){App.$doc=a(document),App.$doc.on("click","#play",App.Host.createGame),App.$doc.on("click","#playAgain",App.restart),App.$doc.on("click","#join",App.Player.onJoin),App.controller("#button1",1),App.controller("#button2",2)},Host:{createGame:function(){b.socket.emit("createNewGame")},startGame:function(a){App.activeRoom=a.activeRoom,App.socketId=a.socketId,App.role="Host",App.Host.showCode()},showCode:function(){a("#menu").hide(),a("#getCode").show(),a("#code").html(App.activeRoom)},clickAction:function(a){var b={0:joystick,1:button1,2:button2};b[a.button]&&b[a.button](a.angle)},changeLayout:function(b){a("#host").hide(),a("#game").show(),start()}},Player:{setNum:0,onJoin:function(){var c={activeRoom:a("#input").val()};b.socket.emit("JoinGame",c),App.role="Player"},changeLayout:function(c){b.socket.io.engine.id===c.socketId&&(App.role="Player",App.activeRoom=c.activeRoom,a("#connect").hide(),a("#controller").show(),offset=a("#joystick").offset())},button:function(a,c){var d={activeRoom:App.activeRoom,button:a,angle:c};b.socket.emit("pressButton",d)}}},b.init(),App.init()}($));
