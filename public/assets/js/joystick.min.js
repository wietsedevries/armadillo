function calculateHour(a,b){var c,d,e=a-offset.top,f=b-offset.left;f<-12||e<-12||f>12||e>12||f>12||e<-12||f<-12||e>12||0===f&&0===e?(cal=Math.round(180*Math.atan(e/f)/Math.PI*1e4)/1e4,c=e<0&&f<0?cal-180:e>1&&f<0?cal+180:cal,c<-60&&c>=-90?d=1:c<-30&&c>=-60?d=2:c<0&&c>=-30?d=3:c<30&&c>=0?d=4:c<60&&c>=30?d=5:c<90&&c>=60?d=6:c<120&&c>=90?d=7:c<150&&c>=120?d=8:c<180&&c>=150?d=9:c<-150&&c>=-180?d=10:c<-120&&c>=-150?d=11:c<-90&&c>=-120&&(d=12)):d=0,d!=current&&(App.Player.button(0,d),current=d)}!function(a){function b(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var c,d=a.ui.mouse.prototype,e=d._mouseInit,f=d._mouseDestroy;d._touchStart=function(a){var d=this;!c&&d._mouseCapture(a.originalEvent.changedTouches[0])&&(c=!0,d._touchMoved=!1,b(a,"mouseover"),b(a,"mousemove"),b(a,"mousedown"))},d._touchMove=function(a){c&&(this._touchMoved=!0,b(a,"mousemove"))},d._touchEnd=function(a){c&&(b(a,"mouseup"),b(a,"mouseout"),this._touchMoved||b(a,"click"),c=!1)},d._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),e.call(b)},d._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),f.call(b)}}}(jQuery);var current;$(function(){$("#joystick").draggable({revert:function(){return App.Player.button(0,0),!0},drag:function(){var a=document.getElementById("joystick").getBoundingClientRect();calculateHour(a.top,a.left)}})});
